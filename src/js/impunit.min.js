/*
 Copyright 2011 Manuel RÃ¼lke, http://homecoded.com
 Licensed under the Apache License, Version 2.0
 Check https://github.com/homecoded/impunit for documentation and complete license
 */
var impunit=function(){function h(){function p(a,e){q=!0;e?(r+="ASYNC TEST ("+e+"):\n"+a+"\n\n",0>m.indexOf(e)&&m.push(e),c&&c()):n+=a+"\n\n";s||alert(a)}function h(a,e,b,d){!1===a&&p("TEST FAILED\nTest Name: "+f+"\n"+e+": "+b,d);d&&c&&(0>l.indexOf(d)&&l.push(d),c())}var b={},n="",r="",q,o=-1,j=-1,m=[],s=!0,f,k,t={},u,l=[],c=null,g={},v=0;b.runTests=function(a){a||p("ERROR: No Test Suite specified.");a instanceof Array||(a=[a]);var b;j=o=0;m=[];l=0;l=[];t={};n="";var x=a.length;for(i=0;i<x;i++){var d=
a[i],g=d._setup?d._setup:function(){},c=d._teardown?d._teardown:function(){};for(b in d)if(d.hasOwnProperty(b)){f=b;try{"function"===typeof d[f]&&0===f.indexOf("_test")&&(v++,q=!1,o+=1,k=d,u=!1,g.call(k),d[f].call(k),u?t[f+v]=c:c.call(k),q&&(j+=1))}catch(h){j+=1,p("TEST FAILED\nTest Name: "+f+"\nError: "+h),c&&c.call(k)}}}};b.assertTrue=function(a,e){h(a,"assertTrue",e,b.assertTrue.caller.testName)};b.assertEqual=function(a,e,c){h(a===e,"assertEqual ("+a+") != ("+e+")",c,b.assertEqual.caller.testName)};
b.messages=function(){return n};b.asyncMessages=function(){return r};b.testsFailed=function(){return j};b.asyncTestsFailed=function(){return m.length};b.testsRun=function(){return o};b.asyncTestsRun=function(){return l.length};b.silent=function(a){0<arguments.length&&(s=a?!0:!1);return s};b.onAsyncTestFailed=function(a){0<arguments.length&&"function"===typeof a&&(c=a);return c};b.asyncCallback=function(a){u=!0;var b=k;a.testName=f;a.id=v;g[f+a.id]||(g[f+a.id]=[]);g[f+a.id].push(a);return function(){var c=
a.testName;if(g[c+a.id]){var d=g[c+a.id].indexOf(a);g[c+a.id].splice(d,1)}a();(!g[c+a.id]||0==g[c+a.id].length)&&t[c+a.id].call(b)}};return b}var w=h();w.createInstance=h;return w}();